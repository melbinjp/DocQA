{"openapi":"3.1.0","info":{"title":"DocQA","description":"A RAG application supporting multi-document user sessions.","version":"2.0.0"},"paths":{"/sessions":{"post":{"summary":"Create a new user session","operationId":"create_session_sessions_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionResponse"}}}}}}},"/sessions/{session_id}/ingest":{"post":{"summary":"Ingest a document into a session","operationId":"ingest_sessions__session_id__ingest_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_ingest_sessions__session_id__ingest_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sessions/{session_id}/query":{"post":{"summary":"Ask a question within a session","operationId":"query_sessions__session_id__query_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryPayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sessions/{session_id}/status":{"get":{"summary":"Get session status and remaining time","description":"Returns session status, activity state, and remaining time before expiration.","operationId":"get_session_status_sessions__session_id__status_get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sessions/{session_id}/refresh":{"post":{"summary":"Refresh session to extend timeout","description":"Refreshes a session to extend its timeout period.","operationId":"refresh_session_sessions__session_id__refresh_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionRefreshResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sessions/{session_id}/health":{"get":{"summary":"Simple session health check","description":"Simple endpoint to check if session exists and is active.","operationId":"session_health_check_sessions__session_id__health_get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sessions/{session_id}/documents/{doc_id}":{"delete":{"summary":"Delete a document from a session","description":"Deletes a specific document from a user session.","operationId":"delete_document_sessions__session_id__documents__doc_id__delete","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}},{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","title":"Doc Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_ingest_sessions__session_id__ingest_post":{"properties":{"file":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"File"}},"type":"object","title":"Body_ingest_sessions__session_id__ingest_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IngestResponse":{"properties":{"doc_id":{"type":"string","title":"Doc Id"},"source":{"type":"string","title":"Source"}},"type":"object","required":["doc_id","source"],"title":"IngestResponse"},"QueryPayload":{"properties":{"q":{"type":"string","title":"Q"},"doc_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Doc Ids"},"stream":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Stream","default":false}},"type":"object","required":["q"],"title":"QueryPayload"},"SessionRefreshResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"refreshed_at":{"type":"string","title":"Refreshed At"},"remaining_minutes":{"type":"number","title":"Remaining Minutes"}},"type":"object","required":["session_id","refreshed_at","remaining_minutes"],"title":"SessionRefreshResponse"},"SessionResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"}},"type":"object","required":["session_id"],"title":"SessionResponse"},"SessionStatusResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"active":{"type":"boolean","title":"Active"},"remaining_minutes":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Remaining Minutes"},"last_accessed":{"type":"string","title":"Last Accessed"}},"type":"object","required":["session_id","active","last_accessed"],"title":"SessionStatusResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}